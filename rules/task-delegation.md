# 任务委派规则

## 核心规则

**所有实现任务都必须交给子代理完成，主代理不要自己去写代码。**

---

## 何时委派子代理

### 必须委派的任务

1. **代码编写** - 任何形式的代码实现
2. **系统集成** - 连接不同系统/模块
3. **功能开发** - 新功能实现
4. **测试执行** - 复杂测试任务
5. **数据库操作** - 创建/修改数据库结构

### 主代理职责

1. **协调和路由** - 判断是否需要子代理
2. **快速响应** - 保持对话流，不阻塞用户
3. **任务规划** - 制定子代理的任务描述
4. **结果审核** - 检查子代理的完成质量

---

## 子代理调用原则

### 响应性原则

**短任务 (< 30秒)** → 主代理直接执行
**长任务 (> 30秒)** → spawn 子代理

### 复杂度原则

**简单任务** → 主代理直接执行
**复杂/多步骤** → spawn 子代理

### 风险原则

**低风险** → 主代理直接执行
**高风险** → spawn 子代理（可监控、可回滚）

---

## 当前待委派任务

### 任务1：集成到现有的自动发布系统

**任务描述**：
- 将数据驱动的小红书系统集成到 `xhs-auto-publisher/`
- 实现搜索和推理引擎的调用
- 确保与现有发布流程兼容

**子代理选择**：
- Coding Agent（Codex CLI / Claude Code / OpenCode）

---

## 记录日期

**创建日期**: 2026-02-22 17:30
**最后更新**: 2026-02-22 17:30
