{"version":3,"sources":["../node_modules/.pnpm/@trpc+server@10.35.0/node_modules/@trpc/server/dist/observable-ade1bad8.mjs","../node_modules/.pnpm/@trpc+server@10.35.0/node_modules/@trpc/server/dist/observable/index.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/splitLink-4c75f7be.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/TRPCClientError-fef6cf44.mjs","../node_modules/.pnpm/@trpc+server@10.35.0/node_modules/@trpc/server/dist/codes-c924c3db.mjs","../node_modules/.pnpm/@trpc+server@10.35.0/node_modules/@trpc/server/dist/index-f91d720c.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/httpUtils-ad76b802.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/transformResult-7ab522e6.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/httpBatchLink-520db465.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/links/httpLink.mjs","../node_modules/.pnpm/@trpc+client@10.35.0_@trpc+server@10.35.0/node_modules/@trpc/client/dist/index.mjs","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/double-indexed-kv.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/registry.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/class-registry.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/util.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/custom-transformer-registry.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/is.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/pathstringifier.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/transformer.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/accessDeep.ts","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/plainer.ts","../node_modules/.pnpm/is-what@4.1.15/node_modules/is-what/dist/index.js","../node_modules/.pnpm/copy-anything@3.0.5/node_modules/copy-anything/dist/index.js","../node_modules/.pnpm/superjson@1.13.1/node_modules/superjson/src/index.ts","../src/index.ts"],"sourcesContent":["function identity(x) {\n    return x;\n}\n\n/** @internal */ function pipeFromArray(fns) {\n    if (fns.length === 0) {\n        return identity;\n    }\n    if (fns.length === 1) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce((prev, fn)=>fn(prev), input);\n    };\n}\n\nfunction isObservable(x) {\n    return typeof x === 'object' && x !== null && 'subscribe' in x;\n}\nfunction observable(subscribe) {\n    const self = {\n        subscribe (observer) {\n            let teardownRef = null;\n            let isDone = false;\n            let unsubscribed = false;\n            let teardownImmediately = false;\n            function unsubscribe() {\n                if (teardownRef === null) {\n                    teardownImmediately = true;\n                    return;\n                }\n                if (unsubscribed) {\n                    return;\n                }\n                unsubscribed = true;\n                if (typeof teardownRef === 'function') {\n                    teardownRef();\n                } else if (teardownRef) {\n                    teardownRef.unsubscribe();\n                }\n            }\n            teardownRef = subscribe({\n                next (value) {\n                    if (isDone) {\n                        return;\n                    }\n                    observer.next?.(value);\n                },\n                error (err) {\n                    if (isDone) {\n                        return;\n                    }\n                    isDone = true;\n                    observer.error?.(err);\n                    unsubscribe();\n                },\n                complete () {\n                    if (isDone) {\n                        return;\n                    }\n                    isDone = true;\n                    observer.complete?.();\n                    unsubscribe();\n                }\n            });\n            if (teardownImmediately) {\n                unsubscribe();\n            }\n            return {\n                unsubscribe\n            };\n        },\n        pipe (...operations) {\n            return pipeFromArray(operations)(self);\n        }\n    };\n    return self;\n}\n\nexport { isObservable as i, observable as o };\n","export { i as isObservable, o as observable } from '../observable-ade1bad8.mjs';\n\nfunction share(_opts) {\n    return (originalObserver)=>{\n        let refCount = 0;\n        let subscription = null;\n        const observers = [];\n        function startIfNeeded() {\n            if (subscription) {\n                return;\n            }\n            subscription = originalObserver.subscribe({\n                next (value) {\n                    for (const observer of observers){\n                        observer.next?.(value);\n                    }\n                },\n                error (error) {\n                    for (const observer of observers){\n                        observer.error?.(error);\n                    }\n                },\n                complete () {\n                    for (const observer of observers){\n                        observer.complete?.();\n                    }\n                }\n            });\n        }\n        function resetIfNeeded() {\n            // \"resetOnRefCountZero\"\n            if (refCount === 0 && subscription) {\n                const _sub = subscription;\n                subscription = null;\n                _sub.unsubscribe();\n            }\n        }\n        return {\n            subscribe (observer) {\n                refCount++;\n                observers.push(observer);\n                startIfNeeded();\n                return {\n                    unsubscribe () {\n                        refCount--;\n                        resetIfNeeded();\n                        const index = observers.findIndex((v)=>v === observer);\n                        if (index > -1) {\n                            observers.splice(index, 1);\n                        }\n                    }\n                };\n            }\n        };\n    };\n}\n\nfunction map(project) {\n    return (originalObserver)=>{\n        return {\n            subscribe (observer) {\n                let index = 0;\n                const subscription = originalObserver.subscribe({\n                    next (value) {\n                        observer.next?.(project(value, index++));\n                    },\n                    error (error) {\n                        observer.error?.(error);\n                    },\n                    complete () {\n                        observer.complete?.();\n                    }\n                });\n                return subscription;\n            }\n        };\n    };\n}\n\nfunction tap(observer) {\n    return (originalObserver)=>{\n        return {\n            subscribe (observer2) {\n                return originalObserver.subscribe({\n                    next (v) {\n                        observer.next?.(v);\n                        observer2.next?.(v);\n                    },\n                    error (v) {\n                        observer.error?.(v);\n                        observer2.error?.(v);\n                    },\n                    complete () {\n                        observer.complete?.();\n                        observer2.complete?.();\n                    }\n                });\n            }\n        };\n    };\n}\n\nclass ObservableAbortError extends Error {\n    constructor(message){\n        super(message);\n        this.name = 'ObservableAbortError';\n        Object.setPrototypeOf(this, ObservableAbortError.prototype);\n    }\n}\n/** @internal */ function observableToPromise(observable) {\n    let abort;\n    const promise = new Promise((resolve, reject)=>{\n        let isDone = false;\n        function onDone() {\n            if (isDone) {\n                return;\n            }\n            isDone = true;\n            reject(new ObservableAbortError('This operation was aborted.'));\n            obs$.unsubscribe();\n        }\n        const obs$ = observable.subscribe({\n            next (data) {\n                isDone = true;\n                resolve(data);\n                onDone();\n            },\n            error (data) {\n                isDone = true;\n                reject(data);\n                onDone();\n            },\n            complete () {\n                isDone = true;\n                onDone();\n            }\n        });\n        abort = onDone;\n    });\n    return {\n        promise,\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        abort: abort\n    };\n}\n\nexport { map, observableToPromise, share, tap };\n","import { observable } from '@trpc/server/observable';\n\n/** @internal */ function createChain(opts) {\n    return observable((observer)=>{\n        function execute(index = 0, op = opts.op) {\n            const next = opts.links[index];\n            if (!next) {\n                throw new Error('No more links to execute - did you forget to add an ending link?');\n            }\n            const subscription = next({\n                op,\n                next (nextOp) {\n                    const nextObserver = execute(index + 1, nextOp);\n                    return nextObserver;\n                }\n            });\n            return subscription;\n        }\n        const obs$ = execute();\n        return obs$.subscribe(observer);\n    });\n}\n\nfunction asArray(value) {\n    return Array.isArray(value) ? value : [\n        value\n    ];\n}\nfunction splitLink(opts) {\n    return (runtime)=>{\n        const yes = asArray(opts.true).map((link)=>link(runtime));\n        const no = asArray(opts.false).map((link)=>link(runtime));\n        return (props)=>{\n            return observable((observer)=>{\n                const links = opts.condition(props.op) ? yes : no;\n                return createChain({\n                    op: props.op,\n                    links\n                }).subscribe(observer);\n            });\n        };\n    };\n}\n\nexport { createChain as c, splitLink as s };\n","function isTRPCClientError(cause) {\n    return cause instanceof TRPCClientError || /**\n     * @deprecated\n     * Delete in next major\n     */ cause.name === 'TRPCClientError';\n}\nclass TRPCClientError extends Error {\n    static from(cause, opts = {}) {\n        if (!(cause instanceof Error)) {\n            return new TRPCClientError(cause.error.message ?? '', {\n                ...opts,\n                cause: undefined,\n                result: cause\n            });\n        }\n        if (isTRPCClientError(cause)) {\n            if (opts.meta) {\n                // Decorate with meta error data\n                cause.meta = {\n                    ...cause.meta,\n                    ...opts.meta\n                };\n            }\n            return cause;\n        }\n        return new TRPCClientError(cause.message, {\n            ...opts,\n            cause,\n            result: null\n        });\n    }\n    constructor(message, opts){\n        const cause = opts?.cause;\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore https://github.com/tc39/proposal-error-cause\n        super(message, {\n            cause\n        });\n        this.meta = opts?.meta;\n        this.cause = cause;\n        this.shape = opts?.result?.error;\n        this.data = opts?.result?.error.data;\n        this.name = 'TRPCClientError';\n        Object.setPrototypeOf(this, TRPCClientError.prototype);\n    }\n}\n\nexport { TRPCClientError as T };\n","/**\n * @internal\n */ function invert(obj) {\n    const newObj = Object.create(null);\n    for(const key in obj){\n        const v = obj[key];\n        newObj[v] = key;\n    }\n    return newObj;\n}\n\n// reference: https://www.jsonrpc.org/specification\n/**\n * JSON-RPC 2.0 Error codes\n *\n * `-32000` to `-32099` are reserved for implementation-defined server-errors.\n * For tRPC we're copying the last digits of HTTP 4XX errors.\n */ const TRPC_ERROR_CODES_BY_KEY = {\n    /**\n   * Invalid JSON was received by the server.\n   * An error occurred on the server while parsing the JSON text.\n   */ PARSE_ERROR: -32700,\n    /**\n   * The JSON sent is not a valid Request object.\n   */ BAD_REQUEST: -32600,\n    // Internal JSON-RPC error\n    INTERNAL_SERVER_ERROR: -32603,\n    NOT_IMPLEMENTED: -32603,\n    // Implementation specific errors\n    UNAUTHORIZED: -32001,\n    FORBIDDEN: -32003,\n    NOT_FOUND: -32004,\n    METHOD_NOT_SUPPORTED: -32005,\n    TIMEOUT: -32008,\n    CONFLICT: -32009,\n    PRECONDITION_FAILED: -32012,\n    PAYLOAD_TOO_LARGE: -32013,\n    UNPROCESSABLE_CONTENT: -32022,\n    TOO_MANY_REQUESTS: -32029,\n    CLIENT_CLOSED_REQUEST: -32099\n};\nconst TRPC_ERROR_CODES_BY_NUMBER = invert(TRPC_ERROR_CODES_BY_KEY);\n\nexport { TRPC_ERROR_CODES_BY_KEY as T, TRPC_ERROR_CODES_BY_NUMBER as a, invert as i };\n","import { i as invert, T as TRPC_ERROR_CODES_BY_KEY } from './codes-c924c3db.mjs';\n\nconst TRPC_ERROR_CODES_BY_NUMBER = invert(TRPC_ERROR_CODES_BY_KEY);\nconst JSONRPC2_TO_HTTP_CODE = {\n    PARSE_ERROR: 400,\n    BAD_REQUEST: 400,\n    UNAUTHORIZED: 401,\n    NOT_FOUND: 404,\n    FORBIDDEN: 403,\n    METHOD_NOT_SUPPORTED: 405,\n    TIMEOUT: 408,\n    CONFLICT: 409,\n    PRECONDITION_FAILED: 412,\n    PAYLOAD_TOO_LARGE: 413,\n    UNPROCESSABLE_CONTENT: 422,\n    TOO_MANY_REQUESTS: 429,\n    CLIENT_CLOSED_REQUEST: 499,\n    INTERNAL_SERVER_ERROR: 500,\n    NOT_IMPLEMENTED: 501\n};\nfunction getStatusCodeFromKey(code) {\n    return JSONRPC2_TO_HTTP_CODE[code] ?? 500;\n}\nfunction getHTTPStatusCode(json) {\n    const arr = Array.isArray(json) ? json : [\n        json\n    ];\n    const httpStatuses = new Set(arr.map((res)=>{\n        if ('error' in res) {\n            const data = res.error.data;\n            if (typeof data.httpStatus === 'number') {\n                return data.httpStatus;\n            }\n            const code = TRPC_ERROR_CODES_BY_NUMBER[res.error.code];\n            return getStatusCodeFromKey(code);\n        }\n        return 200;\n    }));\n    if (httpStatuses.size !== 1) {\n        return 207;\n    }\n    const httpStatus = httpStatuses.values().next().value;\n    return httpStatus;\n}\nfunction getHTTPStatusCodeFromError(error) {\n    return getStatusCodeFromKey(error.code);\n}\n\nconst noop = ()=>{\n// noop\n};\nfunction createInnerProxy(callback, path) {\n    const proxy = new Proxy(noop, {\n        get (_obj, key) {\n            if (typeof key !== 'string' || key === 'then') {\n                // special case for if the proxy is accidentally treated\n                // like a PromiseLike (like in `Promise.resolve(proxy)`)\n                return undefined;\n            }\n            return createInnerProxy(callback, [\n                ...path,\n                key\n            ]);\n        },\n        apply (_1, _2, args) {\n            const isApply = path[path.length - 1] === 'apply';\n            return callback({\n                args: isApply ? args.length >= 2 ? args[1] : [] : args,\n                path: isApply ? path.slice(0, -1) : path\n            });\n        }\n    });\n    return proxy;\n}\n/**\n * Creates a proxy that calls the callback with the path and arguments\n *\n * @internal\n */ const createRecursiveProxy = (callback)=>createInnerProxy(callback, []);\n/**\n * Used in place of `new Proxy` where each handler will map 1 level deep to another value.\n *\n * @internal\n */ const createFlatProxy = (callback)=>{\n    return new Proxy(noop, {\n        get (_obj, name) {\n            if (typeof name !== 'string' || name === 'then') {\n                // special case for if the proxy is accidentally treated\n                // like a PromiseLike (like in `Promise.resolve(proxy)`)\n                return undefined;\n            }\n            return callback(name);\n        }\n    });\n};\n\nexport { TRPC_ERROR_CODES_BY_NUMBER as T, createRecursiveProxy as a, getHTTPStatusCode as b, createFlatProxy as c, getHTTPStatusCodeFromError as g };\n","import { T as TRPCClientError } from './TRPCClientError-fef6cf44.mjs';\n\nconst isFunction = (fn)=>typeof fn === 'function';\nfunction getFetch(customFetchImpl) {\n    if (customFetchImpl) {\n        return customFetchImpl;\n    }\n    if (typeof window !== 'undefined' && isFunction(window.fetch)) {\n        return window.fetch;\n    }\n    if (typeof globalThis !== 'undefined' && isFunction(globalThis.fetch)) {\n        return globalThis.fetch;\n    }\n    throw new Error('No fetch implementation found');\n}\n\nfunction getAbortController(customAbortControllerImpl) {\n    if (customAbortControllerImpl) {\n        return customAbortControllerImpl;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    if (typeof window !== 'undefined' && window.AbortController) {\n        return window.AbortController;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    if (typeof globalThis !== 'undefined' && globalThis.AbortController) {\n        return globalThis.AbortController;\n    }\n    return null;\n}\n\nfunction resolveHTTPLinkOptions(opts) {\n    return {\n        url: opts.url,\n        fetch: opts.fetch,\n        AbortController: getAbortController(opts.AbortController)\n    };\n}\n// https://github.com/trpc/trpc/pull/669\nfunction arrayToDict(array) {\n    const dict = {};\n    for(let index = 0; index < array.length; index++){\n        const element = array[index];\n        dict[index] = element;\n    }\n    return dict;\n}\nconst METHOD = {\n    query: 'GET',\n    mutation: 'POST'\n};\nfunction getInput(opts) {\n    return 'input' in opts ? opts.runtime.transformer.serialize(opts.input) : arrayToDict(opts.inputs.map((_input)=>opts.runtime.transformer.serialize(_input)));\n}\nconst getUrl = (opts)=>{\n    let url = opts.url + '/' + opts.path;\n    const queryParts = [];\n    if ('inputs' in opts) {\n        queryParts.push('batch=1');\n    }\n    if (opts.type === 'query') {\n        const input = getInput(opts);\n        if (input !== undefined) {\n            queryParts.push(`input=${encodeURIComponent(JSON.stringify(input))}`);\n        }\n    }\n    if (queryParts.length) {\n        url += '?' + queryParts.join('&');\n    }\n    return url;\n};\nconst getBody = (opts)=>{\n    if (opts.type === 'query') {\n        return undefined;\n    }\n    const input = getInput(opts);\n    return input !== undefined ? JSON.stringify(input) : undefined;\n};\nconst jsonHttpRequester = (opts)=>{\n    return httpRequest({\n        ...opts,\n        contentTypeHeader: 'application/json',\n        getUrl,\n        getBody\n    });\n};\nasync function fetchHTTPResponse(opts, ac) {\n    const url = opts.getUrl(opts);\n    const body = opts.getBody(opts);\n    const { type  } = opts;\n    const resolvedHeaders = await opts.headers();\n    /* istanbul ignore if -- @preserve */ if (type === 'subscription') {\n        throw new Error('Subscriptions should use wsLink');\n    }\n    const headers = {\n        ...opts.contentTypeHeader ? {\n            'content-type': opts.contentTypeHeader\n        } : {},\n        ...opts.batchModeHeader ? {\n            'trpc-batch-mode': opts.batchModeHeader\n        } : {},\n        ...resolvedHeaders\n    };\n    return getFetch(opts.fetch)(url, {\n        method: METHOD[type],\n        signal: ac?.signal,\n        body: body,\n        headers\n    });\n}\nfunction httpRequest(opts) {\n    const ac = opts.AbortController ? new opts.AbortController() : null;\n    const meta = {};\n    const promise = new Promise((resolve, reject)=>{\n        fetchHTTPResponse(opts, ac).then((_res)=>{\n            meta.response = _res;\n            return _res.json();\n        }).then((json)=>{\n            meta.responseJSON = json;\n            resolve({\n                json: json,\n                meta\n            });\n        }).catch((err)=>{\n            reject(TRPCClientError.from(err, {\n                meta\n            }));\n        });\n    });\n    const cancel = ()=>{\n        ac?.abort();\n    };\n    return {\n        promise,\n        cancel\n    };\n}\n\nexport { getBody as a, getFetch as b, fetchHTTPResponse as f, getUrl as g, httpRequest as h, jsonHttpRequester as j, resolveHTTPLinkOptions as r };\n","function isObject(value) {\n    // check that value is object\n    return !!value && !Array.isArray(value) && typeof value === 'object';\n}\n\n// FIXME:\n// - the generics here are probably unnecessary\n// - the RPC-spec could probably be simplified to combine HTTP + WS\n/** @internal */ function transformResultInner(response, runtime) {\n    if ('error' in response) {\n        const error = runtime.transformer.deserialize(response.error);\n        return {\n            ok: false,\n            error: {\n                ...response,\n                error\n            }\n        };\n    }\n    const result = {\n        ...response.result,\n        ...(!response.result.type || response.result.type === 'data') && {\n            type: 'data',\n            data: runtime.transformer.deserialize(response.result.data)\n        }\n    };\n    return {\n        ok: true,\n        result\n    };\n}\nclass TransformResultError extends Error {\n    constructor(){\n        super('Unable to transform response from server');\n    }\n}\n/**\n * Transforms and validates that the result is a valid TRPCResponse\n * @internal\n */ function transformResult(response, runtime) {\n    let result;\n    try {\n        // Use the data transformers on the JSON-response\n        result = transformResultInner(response, runtime);\n    } catch (err) {\n        throw new TransformResultError();\n    }\n    // check that output of the transformers is a valid TRPCResponse\n    if (!result.ok && (!isObject(result.error.error) || typeof result.error.error.code !== 'number')) {\n        throw new TransformResultError();\n    }\n    if (result.ok && !isObject(result.result)) {\n        throw new TransformResultError();\n    }\n    return result;\n}\n\nexport { transformResult as t };\n","import { observable } from '@trpc/server/observable';\nimport { t as transformResult } from './transformResult-7ab522e6.mjs';\nimport { T as TRPCClientError } from './TRPCClientError-fef6cf44.mjs';\nimport { r as resolveHTTPLinkOptions, g as getUrl, j as jsonHttpRequester } from './httpUtils-ad76b802.mjs';\n\n/* eslint-disable @typescript-eslint/no-non-null-assertion */ /**\n * A function that should never be called unless we messed something up.\n */ const throwFatalError = ()=>{\n    throw new Error('Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new');\n};\n/**\n * Dataloader that's very inspired by https://github.com/graphql/dataloader\n * Less configuration, no caching, and allows you to cancel requests\n * When cancelling a single fetch the whole batch will be cancelled only when _all_ items are cancelled\n */ function dataLoader(batchLoader) {\n    let pendingItems = null;\n    let dispatchTimer = null;\n    const destroyTimerAndPendingItems = ()=>{\n        clearTimeout(dispatchTimer);\n        dispatchTimer = null;\n        pendingItems = null;\n    };\n    /**\n   * Iterate through the items and split them into groups based on the `batchLoader`'s validate function\n   */ function groupItems(items) {\n        const groupedItems = [\n            []\n        ];\n        let index = 0;\n        while(true){\n            const item = items[index];\n            if (!item) {\n                break;\n            }\n            const lastGroup = groupedItems[groupedItems.length - 1];\n            if (item.aborted) {\n                // Item was aborted before it was dispatched\n                item.reject?.(new Error('Aborted'));\n                index++;\n                continue;\n            }\n            const isValid = batchLoader.validate(lastGroup.concat(item).map((it)=>it.key));\n            if (isValid) {\n                lastGroup.push(item);\n                index++;\n                continue;\n            }\n            if (lastGroup.length === 0) {\n                item.reject?.(new Error('Input is too big for a single dispatch'));\n                index++;\n                continue;\n            }\n            // Create new group, next iteration will try to add the item to that\n            groupedItems.push([]);\n        }\n        return groupedItems;\n    }\n    function dispatch() {\n        const groupedItems = groupItems(pendingItems);\n        destroyTimerAndPendingItems();\n        // Create batches for each group of items\n        for (const items of groupedItems){\n            if (!items.length) {\n                continue;\n            }\n            const batch = {\n                items,\n                cancel: throwFatalError\n            };\n            for (const item of items){\n                item.batch = batch;\n            }\n            const unitResolver = (index, value)=>{\n                const item = batch.items[index];\n                item.resolve?.(value);\n                item.batch = null;\n                item.reject = null;\n                item.resolve = null;\n            };\n            const { promise , cancel  } = batchLoader.fetch(batch.items.map((_item)=>_item.key), unitResolver);\n            batch.cancel = cancel;\n            promise.then((result)=>{\n                for(let i = 0; i < result.length; i++){\n                    const value = result[i];\n                    unitResolver(i, value);\n                }\n                for (const item of batch.items){\n                    item.reject?.(new Error('Missing result'));\n                    item.batch = null;\n                }\n            }).catch((cause)=>{\n                for (const item of batch.items){\n                    item.reject?.(cause);\n                    item.batch = null;\n                }\n            });\n        }\n    }\n    function load(key) {\n        const item = {\n            aborted: false,\n            key,\n            batch: null,\n            resolve: throwFatalError,\n            reject: throwFatalError\n        };\n        const promise = new Promise((resolve, reject)=>{\n            item.reject = reject;\n            item.resolve = resolve;\n            if (!pendingItems) {\n                pendingItems = [];\n            }\n            pendingItems.push(item);\n        });\n        if (!dispatchTimer) {\n            dispatchTimer = setTimeout(dispatch);\n        }\n        const cancel = ()=>{\n            item.aborted = true;\n            if (item.batch?.items.every((item)=>item.aborted)) {\n                // All items in the batch have been cancelled\n                item.batch.cancel();\n                item.batch = null;\n            }\n        };\n        return {\n            promise,\n            cancel\n        };\n    }\n    return {\n        load\n    };\n}\n\n/**\n * @internal\n */ function createHTTPBatchLink(requester) {\n    return function httpBatchLink(opts) {\n        const resolvedOpts = resolveHTTPLinkOptions(opts);\n        const maxURLLength = opts.maxURLLength ?? Infinity;\n        // initialized config\n        return (runtime)=>{\n            const batchLoader = (type)=>{\n                const validate = (batchOps)=>{\n                    if (maxURLLength === Infinity) {\n                        // escape hatch for quick calcs\n                        return true;\n                    }\n                    const path = batchOps.map((op)=>op.path).join(',');\n                    const inputs = batchOps.map((op)=>op.input);\n                    const url = getUrl({\n                        ...resolvedOpts,\n                        runtime,\n                        type,\n                        path,\n                        inputs\n                    });\n                    return url.length <= maxURLLength;\n                };\n                const fetch = requester({\n                    ...resolvedOpts,\n                    runtime,\n                    type,\n                    opts\n                });\n                return {\n                    validate,\n                    fetch\n                };\n            };\n            const query = dataLoader(batchLoader('query'));\n            const mutation = dataLoader(batchLoader('mutation'));\n            const subscription = dataLoader(batchLoader('subscription'));\n            const loaders = {\n                query,\n                subscription,\n                mutation\n            };\n            return ({ op  })=>{\n                return observable((observer)=>{\n                    const loader = loaders[op.type];\n                    const { promise , cancel  } = loader.load(op);\n                    let _res = undefined;\n                    promise.then((res)=>{\n                        _res = res;\n                        const transformed = transformResult(res.json, runtime);\n                        if (!transformed.ok) {\n                            observer.error(TRPCClientError.from(transformed.error, {\n                                meta: res.meta\n                            }));\n                            return;\n                        }\n                        observer.next({\n                            context: res.meta,\n                            result: transformed.result\n                        });\n                        observer.complete();\n                    }).catch((err)=>{\n                        observer.error(TRPCClientError.from(err, {\n                            meta: _res?.meta\n                        }));\n                    });\n                    return ()=>{\n                        cancel();\n                    };\n                });\n            };\n        };\n    };\n}\n\nconst batchRequester = (requesterOpts)=>{\n    return (batchOps)=>{\n        const path = batchOps.map((op)=>op.path).join(',');\n        const inputs = batchOps.map((op)=>op.input);\n        const { promise , cancel  } = jsonHttpRequester({\n            ...requesterOpts,\n            path,\n            inputs,\n            headers () {\n                if (!requesterOpts.opts.headers) {\n                    return {};\n                }\n                if (typeof requesterOpts.opts.headers === 'function') {\n                    return requesterOpts.opts.headers({\n                        opList: batchOps\n                    });\n                }\n                return requesterOpts.opts.headers;\n            }\n        });\n        return {\n            promise: promise.then((res)=>{\n                const resJSON = Array.isArray(res.json) ? res.json : batchOps.map(()=>res.json);\n                const result = resJSON.map((item)=>({\n                        meta: res.meta,\n                        json: item\n                    }));\n                return result;\n            }),\n            cancel\n        };\n    };\n};\nconst httpBatchLink = createHTTPBatchLink(batchRequester);\n\nexport { createHTTPBatchLink as c, httpBatchLink as h };\n","import { observable } from '@trpc/server/observable';\nimport { t as transformResult } from '../transformResult-7ab522e6.mjs';\nimport { T as TRPCClientError } from '../TRPCClientError-fef6cf44.mjs';\nimport { r as resolveHTTPLinkOptions, j as jsonHttpRequester } from '../httpUtils-ad76b802.mjs';\n\nfunction httpLinkFactory(factoryOpts) {\n    return (opts)=>{\n        const resolvedOpts = resolveHTTPLinkOptions(opts);\n        return (runtime)=>({ op  })=>observable((observer)=>{\n                    const { path , input , type  } = op;\n                    const { promise , cancel  } = factoryOpts.requester({\n                        ...resolvedOpts,\n                        runtime,\n                        type,\n                        path,\n                        input,\n                        headers () {\n                            if (!opts.headers) {\n                                return {};\n                            }\n                            if (typeof opts.headers === 'function') {\n                                return opts.headers({\n                                    op\n                                });\n                            }\n                            return opts.headers;\n                        }\n                    });\n                    let meta = undefined;\n                    promise.then((res)=>{\n                        meta = res.meta;\n                        const transformed = transformResult(res.json, runtime);\n                        if (!transformed.ok) {\n                            observer.error(TRPCClientError.from(transformed.error, {\n                                meta\n                            }));\n                            return;\n                        }\n                        observer.next({\n                            context: res.meta,\n                            result: transformed.result\n                        });\n                        observer.complete();\n                    }).catch((cause)=>{\n                        observer.error(TRPCClientError.from(cause, {\n                            meta\n                        }));\n                    });\n                    return ()=>{\n                        cancel();\n                    };\n                });\n    };\n}\nconst httpLink = httpLinkFactory({\n    requester: jsonHttpRequester\n});\n\nexport { httpLink, httpLinkFactory };\n","import { share, observableToPromise } from '@trpc/server/observable';\nimport { c as createChain } from './splitLink-4c75f7be.mjs';\nexport { s as splitLink } from './splitLink-4c75f7be.mjs';\nimport { T as TRPCClientError } from './TRPCClientError-fef6cf44.mjs';\nexport { T as TRPCClientError } from './TRPCClientError-fef6cf44.mjs';\nimport { createFlatProxy, createRecursiveProxy } from '@trpc/server/shared';\nimport { f as fetchHTTPResponse, g as getUrl, a as getBody$1, h as httpRequest } from './httpUtils-ad76b802.mjs';\nexport { b as getFetch } from './httpUtils-ad76b802.mjs';\nimport { c as createHTTPBatchLink } from './httpBatchLink-520db465.mjs';\nexport { h as httpBatchLink } from './httpBatchLink-520db465.mjs';\nimport { httpLinkFactory } from './links/httpLink.mjs';\nexport { httpLink, httpLinkFactory } from './links/httpLink.mjs';\nexport { loggerLink } from './links/loggerLink.mjs';\nexport { createWSClient, wsLink } from './links/wsLink.mjs';\nimport './transformResult-7ab522e6.mjs';\n\nclass TRPCUntypedClient {\n    $request({ type , input , path , context ={}  }) {\n        const chain$ = createChain({\n            links: this.links,\n            op: {\n                id: ++this.requestId,\n                type,\n                path,\n                input,\n                context\n            }\n        });\n        return chain$.pipe(share());\n    }\n    requestAsPromise(opts) {\n        const req$ = this.$request(opts);\n        const { promise , abort  } = observableToPromise(req$);\n        const abortablePromise = new Promise((resolve, reject)=>{\n            opts.signal?.addEventListener('abort', abort);\n            promise.then((envelope)=>{\n                resolve(envelope.result.data);\n            }).catch((err)=>{\n                reject(TRPCClientError.from(err));\n            });\n        });\n        return abortablePromise;\n    }\n    query(path, input, opts) {\n        return this.requestAsPromise({\n            type: 'query',\n            path,\n            input,\n            context: opts?.context,\n            signal: opts?.signal\n        });\n    }\n    mutation(path, input, opts) {\n        return this.requestAsPromise({\n            type: 'mutation',\n            path,\n            input,\n            context: opts?.context,\n            signal: opts?.signal\n        });\n    }\n    subscription(path, input, opts) {\n        const observable$ = this.$request({\n            type: 'subscription',\n            path,\n            input,\n            context: opts?.context\n        });\n        return observable$.subscribe({\n            next (envelope) {\n                if (envelope.result.type === 'started') {\n                    opts.onStarted?.();\n                } else if (envelope.result.type === 'stopped') {\n                    opts.onStopped?.();\n                } else {\n                    opts.onData?.(envelope.result.data);\n                }\n            },\n            error (err) {\n                opts.onError?.(err);\n            },\n            complete () {\n                opts.onComplete?.();\n            }\n        });\n    }\n    constructor(opts){\n        this.requestId = 0;\n        const combinedTransformer = (()=>{\n            const transformer = opts.transformer;\n            if (!transformer) {\n                return {\n                    input: {\n                        serialize: (data)=>data,\n                        deserialize: (data)=>data\n                    },\n                    output: {\n                        serialize: (data)=>data,\n                        deserialize: (data)=>data\n                    }\n                };\n            }\n            if ('input' in transformer) {\n                return opts.transformer;\n            }\n            return {\n                input: transformer,\n                output: transformer\n            };\n        })();\n        this.runtime = {\n            transformer: {\n                serialize: (data)=>combinedTransformer.input.serialize(data),\n                deserialize: (data)=>combinedTransformer.output.deserialize(data)\n            },\n            combinedTransformer\n        };\n        // Initialize the links\n        this.links = opts.links.map((link)=>link(this.runtime));\n    }\n}\n\nfunction createTRPCUntypedClient(opts) {\n    return new TRPCUntypedClient(opts);\n}\n\n/**\n * @deprecated use `createTRPCProxyClient` instead\n */ function createTRPCClient(opts) {\n    const client = new TRPCUntypedClient(opts);\n    return client;\n}\n\nconst clientCallTypeMap = {\n    query: 'query',\n    mutate: 'mutation',\n    subscribe: 'subscription'\n};\n/** @internal */ const clientCallTypeToProcedureType = (clientCallType)=>{\n    return clientCallTypeMap[clientCallType];\n};\n/**\n * @deprecated use `createTRPCProxyClient` instead\n * @internal\n */ function createTRPCClientProxy(client) {\n    return createFlatProxy((key)=>{\n        if (client.hasOwnProperty(key)) {\n            return client[key];\n        }\n        if (key === '__untypedClient') {\n            return client;\n        }\n        return createRecursiveProxy(({ path , args  })=>{\n            const pathCopy = [\n                key,\n                ...path\n            ];\n            const procedureType = clientCallTypeToProcedureType(pathCopy.pop());\n            const fullPath = pathCopy.join('.');\n            return client[procedureType](fullPath, ...args);\n        });\n    });\n}\nfunction createTRPCProxyClient(opts) {\n    const client = new TRPCUntypedClient(opts);\n    const proxy = createTRPCClientProxy(client);\n    return proxy;\n}\n/**\n * Get an untyped client from a proxy client\n * @internal\n */ function getUntypedClient(client) {\n    return client.__untypedClient;\n}\n\nfunction getTextDecoder(customTextDecoder) {\n    if (customTextDecoder) {\n        return customTextDecoder;\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    if (typeof window !== 'undefined' && window.TextDecoder) {\n        return new window.TextDecoder();\n    }\n    // eslint-disable-next-line @typescript-eslint/prefer-optional-chain\n    if (typeof globalThis !== 'undefined' && globalThis.TextDecoder) {\n        return new globalThis.TextDecoder();\n    }\n    throw new Error('No TextDecoder implementation found');\n}\n\n// Stream parsing adapted from https://www.loginradius.com/blog/engineering/guest-post/http-streaming-with-nodejs-and-fetch-api/\n/**\n * @internal\n * @description Take a stream of bytes and call `onLine` with\n * a JSON object for each line in the stream. Expected stream\n * format is:\n * ```json\n * {\"1\": {...}\n * ,\"0\": {...}\n * }\n * ```\n */ async function parseJSONStream(opts) {\n    const parse = opts.parse ?? JSON.parse;\n    const onLine = (line)=>{\n        if (opts.signal?.aborted) return;\n        if (!line || line === '}') {\n            return;\n        }\n        /**\n     * At this point, `line` can be one of two things:\n     * - The first line of the stream `{\"2\":{...}`\n     * - A line in the middle of the stream `,\"2\":{...}`\n     */ const indexOfColon = line.indexOf(':');\n        const indexAsStr = line.substring(2, indexOfColon - 1);\n        const text = line.substring(indexOfColon + 1);\n        opts.onSingle(Number(indexAsStr), parse(text));\n    };\n    await readLines(opts.readableStream, onLine, opts.textDecoder);\n}\n/**\n * Handle transforming a stream of bytes into lines of text.\n * To avoid using AsyncIterators / AsyncGenerators,\n * we use a callback for each line.\n *\n * @param readableStream can be a NodeJS stream or a WebAPI stream\n * @param onLine will be called for every line ('\\n' delimited) in the stream\n */ async function readLines(readableStream, onLine, textDecoder) {\n    let partOfLine = '';\n    const onChunk = (chunk)=>{\n        const chunkText = textDecoder.decode(chunk);\n        const chunkLines = chunkText.split('\\n');\n        if (chunkLines.length === 1) {\n            partOfLine += chunkLines[0];\n        } else if (chunkLines.length > 1) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- length checked on line above\n            onLine(partOfLine + chunkLines[0]);\n            for(let i = 1; i < chunkLines.length - 1; i++){\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- length checked on line above\n                onLine(chunkLines[i]);\n            }\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- length doesn't change, so is necessarily > 1\n            partOfLine = chunkLines[chunkLines.length - 1];\n        }\n    };\n    // we handle 2 different types of streams, this if where we figure out which one we have\n    if ('getReader' in readableStream) {\n        await readStandardChunks(readableStream, onChunk);\n    } else {\n        await readNodeChunks(readableStream, onChunk);\n    }\n    onLine(partOfLine);\n}\n/**\n * Handle NodeJS stream\n */ function readNodeChunks(stream, onChunk) {\n    return new Promise((resolve)=>{\n        stream.on('data', onChunk);\n        stream.on('end', resolve);\n    });\n}\n/**\n * Handle WebAPI stream\n */ async function readStandardChunks(stream, onChunk) {\n    const reader = stream.getReader();\n    let readResult = await reader.read();\n    while(!readResult.done){\n        onChunk(readResult.value);\n        readResult = await reader.read();\n    }\n}\nconst streamingJsonHttpRequester = (opts, onSingle)=>{\n    const ac = opts.AbortController ? new opts.AbortController() : null;\n    const responsePromise = fetchHTTPResponse({\n        ...opts,\n        contentTypeHeader: 'application/json',\n        batchModeHeader: 'stream',\n        getUrl,\n        getBody: getBody$1\n    }, ac);\n    const cancel = ()=>ac?.abort();\n    const promise = responsePromise.then(async (res)=>{\n        if (!res.body) throw new Error('Received response without body');\n        const meta = {\n            response: res\n        };\n        return parseJSONStream({\n            readableStream: res.body,\n            onSingle,\n            parse: (string)=>({\n                    json: JSON.parse(string),\n                    meta\n                }),\n            signal: ac?.signal,\n            textDecoder: opts.textDecoder\n        });\n    });\n    return {\n        cancel,\n        promise\n    };\n};\n\nconst streamRequester = (requesterOpts)=>{\n    const textDecoder = getTextDecoder(requesterOpts.opts.textDecoder);\n    return (batchOps, unitResolver)=>{\n        const path = batchOps.map((op)=>op.path).join(',');\n        const inputs = batchOps.map((op)=>op.input);\n        const { cancel , promise  } = streamingJsonHttpRequester({\n            ...requesterOpts,\n            textDecoder,\n            path,\n            inputs,\n            headers () {\n                if (!requesterOpts.opts.headers) {\n                    return {};\n                }\n                if (typeof requesterOpts.opts.headers === 'function') {\n                    return requesterOpts.opts.headers({\n                        opList: batchOps\n                    });\n                }\n                return requesterOpts.opts.headers;\n            }\n        }, (index, res)=>{\n            unitResolver(index, res);\n        });\n        return {\n            /**\n       * return an empty array because the batchLoader expects an array of results\n       * but we've already called the `unitResolver` for each of them, there's\n       * nothing left to do here.\n       */ promise: promise.then(()=>[]),\n            cancel\n        };\n    };\n};\nconst unstable_httpBatchStreamLink = createHTTPBatchLink(streamRequester);\n\nconst getBody = (opts)=>{\n    if (!('input' in opts)) {\n        return undefined;\n    }\n    if (!(opts.input instanceof FormData)) {\n        throw new Error('Input is not FormData');\n    }\n    return opts.input;\n};\nconst formDataRequester = (opts)=>{\n    if (opts.type !== 'mutation') {\n        // TODO(?) handle formdata queries\n        throw new Error('We only handle mutations with formdata');\n    }\n    return httpRequest({\n        ...opts,\n        getUrl () {\n            return `${opts.url}/${opts.path}`;\n        },\n        getBody\n    });\n};\nconst experimental_formDataLink = httpLinkFactory({\n    requester: formDataRequester\n});\n\nexport { clientCallTypeToProcedureType, createTRPCClient, createTRPCClientProxy, createTRPCProxyClient, createTRPCUntypedClient, experimental_formDataLink, getUntypedClient, unstable_httpBatchStreamLink };\n","export class DoubleIndexedKV<K, V> {\n  keyToValue = new Map<K, V>();\n  valueToKey = new Map<V, K>();\n\n  set(key: K, value: V) {\n    this.keyToValue.set(key, value);\n    this.valueToKey.set(value, key);\n  }\n\n  getByKey(key: K): V | undefined {\n    return this.keyToValue.get(key);\n  }\n\n  getByValue(value: V): K | undefined {\n    return this.valueToKey.get(value);\n  }\n\n  clear() {\n    this.keyToValue.clear();\n    this.valueToKey.clear();\n  }\n}\n","import { DoubleIndexedKV } from './double-indexed-kv';\n\nexport class Registry<T> {\n  private kv = new DoubleIndexedKV<string, T>();\n\n  constructor(private readonly generateIdentifier: (v: T) => string) {}\n\n  register(value: T, identifier?: string): void {\n    if (this.kv.getByValue(value)) {\n      return;\n    }\n\n    if (!identifier) {\n      identifier = this.generateIdentifier(value);\n    }\n\n    this.kv.set(identifier, value);\n  }\n\n  clear(): void {\n    this.kv.clear();\n  }\n\n  getIdentifier(value: T) {\n    return this.kv.getByValue(value);\n  }\n\n  getValue(identifier: string) {\n    return this.kv.getByKey(identifier);\n  }\n}\n","import { Registry } from './registry';\nimport { Class } from './types';\n\nexport interface RegisterOptions {\n  identifier?: string;\n  allowProps?: string[];\n}\n\nexport class ClassRegistry extends Registry<Class> {\n  constructor() {\n    super(c => c.name);\n  }\n\n  private classToAllowedProps = new Map<Class, string[]>();\n\n  register(value: Class, options?: string | RegisterOptions): void {\n    if (typeof options === 'object') {\n      if (options.allowProps) {\n        this.classToAllowedProps.set(value, options.allowProps);\n      }\n\n      super.register(value, options.identifier);\n    } else {\n      super.register(value, options);\n    }\n  }\n\n  getAllowedProps(value: Class): string[] | undefined {\n    return this.classToAllowedProps.get(value);\n  }\n}\n","function valuesOfObj<T>(record: Record<string, T>): T[] {\n  if ('values' in Object) {\n    // eslint-disable-next-line es5/no-es6-methods\n    return Object.values(record);\n  }\n\n  const values: T[] = [];\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (const key in record) {\n    if (record.hasOwnProperty(key)) {\n      values.push(record[key]);\n    }\n  }\n\n  return values;\n}\n\nexport function find<T>(\n  record: Record<string, T>,\n  predicate: (v: T) => boolean\n): T | undefined {\n  const values = valuesOfObj(record);\n  if ('find' in values) {\n    // eslint-disable-next-line es5/no-es6-methods\n    return values.find(predicate);\n  }\n\n  const valuesNotNever = values as T[];\n\n  for (let i = 0; i < valuesNotNever.length; i++) {\n    const value = valuesNotNever[i];\n    if (predicate(value)) {\n      return value;\n    }\n  }\n\n  return undefined;\n}\n\nexport function forEach<T>(\n  record: Record<string, T>,\n  run: (v: T, key: string) => void\n) {\n  Object.entries(record).forEach(([key, value]) => run(value, key));\n}\n\nexport function includes<T>(arr: T[], value: T) {\n  return arr.indexOf(value) !== -1;\n}\n\nexport function findArr<T>(\n  record: T[],\n  predicate: (v: T) => boolean\n): T | undefined {\n  for (let i = 0; i < record.length; i++) {\n    const value = record[i];\n    if (predicate(value)) {\n      return value;\n    }\n  }\n\n  return undefined;\n}\n","import { JSONValue } from './types';\nimport { find } from './util';\n\nexport interface CustomTransfomer<I, O extends JSONValue> {\n  name: string;\n  isApplicable: (v: any) => v is I;\n  serialize: (v: I) => O;\n  deserialize: (v: O) => I;\n}\n\nexport class CustomTransformerRegistry {\n  private transfomers: Record<string, CustomTransfomer<any, any>> = {};\n\n  register<I, O extends JSONValue>(transformer: CustomTransfomer<I, O>) {\n    this.transfomers[transformer.name] = transformer;\n  }\n\n  findApplicable<T>(v: T) {\n    return find(this.transfomers, transformer =>\n      transformer.isApplicable(v)\n    ) as CustomTransfomer<T, JSONValue> | undefined;\n  }\n\n  findByName(name: string) {\n    return this.transfomers[name];\n  }\n}\n","const getType = (payload: any): string =>\n  Object.prototype.toString.call(payload).slice(8, -1);\n\nexport const isUndefined = (payload: any): payload is undefined =>\n  typeof payload === 'undefined';\n\nexport const isNull = (payload: any): payload is null => payload === null;\n\nexport const isPlainObject = (\n  payload: any\n): payload is { [key: string]: any } => {\n  if (typeof payload !== 'object' || payload === null) return false;\n  if (payload === Object.prototype) return false;\n  if (Object.getPrototypeOf(payload) === null) return true;\n\n  return Object.getPrototypeOf(payload) === Object.prototype;\n};\n\nexport const isEmptyObject = (payload: any): payload is {} =>\n  isPlainObject(payload) && Object.keys(payload).length === 0;\n\nexport const isArray = (payload: any): payload is any[] =>\n  Array.isArray(payload);\n\nexport const isString = (payload: any): payload is string =>\n  typeof payload === 'string';\n\nexport const isNumber = (payload: any): payload is number =>\n  typeof payload === 'number' && !isNaN(payload);\n\nexport const isBoolean = (payload: any): payload is boolean =>\n  typeof payload === 'boolean';\n\nexport const isRegExp = (payload: any): payload is RegExp =>\n  payload instanceof RegExp;\n\nexport const isMap = (payload: any): payload is Map<any, any> =>\n  payload instanceof Map;\n\nexport const isSet = (payload: any): payload is Set<any> =>\n  payload instanceof Set;\n\nexport const isSymbol = (payload: any): payload is symbol =>\n  getType(payload) === 'Symbol';\n\nexport const isDate = (payload: any): payload is Date =>\n  payload instanceof Date && !isNaN(payload.valueOf());\n\nexport const isError = (payload: any): payload is Error =>\n  payload instanceof Error;\n\nexport const isNaNValue = (payload: any): payload is typeof NaN =>\n  typeof payload === 'number' && isNaN(payload);\n\nexport const isPrimitive = (\n  payload: any\n): payload is boolean | null | undefined | number | string | symbol =>\n  isBoolean(payload) ||\n  isNull(payload) ||\n  isUndefined(payload) ||\n  isNumber(payload) ||\n  isString(payload) ||\n  isSymbol(payload);\n\nexport const isBigint = (payload: any): payload is bigint =>\n  typeof payload === 'bigint';\n\nexport const isInfinite = (payload: any): payload is number =>\n  payload === Infinity || payload === -Infinity;\n\nexport type TypedArrayConstructor =\n  | Int8ArrayConstructor\n  | Uint8ArrayConstructor\n  | Uint8ClampedArrayConstructor\n  | Int16ArrayConstructor\n  | Uint16ArrayConstructor\n  | Int32ArrayConstructor\n  | Uint32ArrayConstructor\n  | Float32ArrayConstructor\n  | Float64ArrayConstructor;\n\nexport type TypedArray = InstanceType<TypedArrayConstructor>;\n\nexport const isTypedArray = (payload: any): payload is TypedArray =>\n  ArrayBuffer.isView(payload) && !(payload instanceof DataView);\n\nexport const isURL = (payload: any): payload is URL => payload instanceof URL;\n","export type StringifiedPath = string;\ntype Path = string[];\n\nexport const escapeKey = (key: string) => key.replace(/\\./g, '\\\\.');\n\nexport const stringifyPath = (path: Path): StringifiedPath =>\n  path\n    .map(String)\n    .map(escapeKey)\n    .join('.');\n\nexport const parsePath = (string: StringifiedPath) => {\n  const result: string[] = [];\n\n  let segment = '';\n  for (let i = 0; i < string.length; i++) {\n    let char = string.charAt(i);\n\n    const isEscapedDot = char === '\\\\' && string.charAt(i + 1) === '.';\n    if (isEscapedDot) {\n      segment += '.';\n      i++;\n      continue;\n    }\n\n    const isEndOfSegment = char === '.';\n    if (isEndOfSegment) {\n      result.push(segment);\n      segment = '';\n      continue;\n    }\n\n    segment += char;\n  }\n\n  const lastSegment = segment;\n  result.push(lastSegment);\n\n  return result;\n};\n","import {\n  isBigint,\n  isDate,\n  isInfinite,\n  isMap,\n  isNaNValue,\n  isRegExp,\n  isSet,\n  isUndefined,\n  isSymbol,\n  isArray,\n  isError,\n  isTypedArray,\n  TypedArrayConstructor,\n  isURL,\n} from './is';\nimport { findArr } from './util';\nimport SuperJSON from '.';\n\nexport type PrimitiveTypeAnnotation = 'number' | 'undefined' | 'bigint';\n\ntype LeafTypeAnnotation =\n  | PrimitiveTypeAnnotation\n  | 'regexp'\n  | 'Date'\n  | 'Error'\n  | 'URL';\n\ntype TypedArrayAnnotation = ['typed-array', string];\ntype ClassTypeAnnotation = ['class', string];\ntype SymbolTypeAnnotation = ['symbol', string];\ntype CustomTypeAnnotation = ['custom', string];\n\ntype SimpleTypeAnnotation = LeafTypeAnnotation | 'map' | 'set';\n\ntype CompositeTypeAnnotation =\n  | TypedArrayAnnotation\n  | ClassTypeAnnotation\n  | SymbolTypeAnnotation\n  | CustomTypeAnnotation;\n\nexport type TypeAnnotation = SimpleTypeAnnotation | CompositeTypeAnnotation;\n\nfunction simpleTransformation<I, O, A extends SimpleTypeAnnotation>(\n  isApplicable: (v: any, superJson: SuperJSON) => v is I,\n  annotation: A,\n  transform: (v: I, superJson: SuperJSON) => O,\n  untransform: (v: O, superJson: SuperJSON) => I\n) {\n  return {\n    isApplicable,\n    annotation,\n    transform,\n    untransform,\n  };\n}\n\nconst simpleRules = [\n  simpleTransformation(\n    isUndefined,\n    'undefined',\n    () => null,\n    () => undefined\n  ),\n  simpleTransformation(\n    isBigint,\n    'bigint',\n    v => v.toString(),\n    v => {\n      if (typeof BigInt !== 'undefined') {\n        return BigInt(v);\n      }\n\n      console.error('Please add a BigInt polyfill.');\n\n      return v as any;\n    }\n  ),\n  simpleTransformation(\n    isDate,\n    'Date',\n    v => v.toISOString(),\n    v => new Date(v)\n  ),\n\n  simpleTransformation(\n    isError,\n    'Error',\n    (v, superJson) => {\n      const baseError: any = {\n        name: v.name,\n        message: v.message,\n      };\n\n      superJson.allowedErrorProps.forEach(prop => {\n        baseError[prop] = (v as any)[prop];\n      });\n\n      return baseError;\n    },\n    (v, superJson) => {\n      const e = new Error(v.message);\n      e.name = v.name;\n      e.stack = v.stack;\n\n      superJson.allowedErrorProps.forEach(prop => {\n        (e as any)[prop] = v[prop];\n      });\n\n      return e;\n    }\n  ),\n\n  simpleTransformation(\n    isRegExp,\n    'regexp',\n    v => '' + v,\n    regex => {\n      const body = regex.slice(1, regex.lastIndexOf('/'));\n      const flags = regex.slice(regex.lastIndexOf('/') + 1);\n      return new RegExp(body, flags);\n    }\n  ),\n\n  simpleTransformation(\n    isSet,\n    'set',\n    // (sets only exist in es6+)\n    // eslint-disable-next-line es5/no-es6-methods\n    v => [...v.values()],\n    v => new Set(v)\n  ),\n  simpleTransformation(\n    isMap,\n    'map',\n    v => [...v.entries()],\n    v => new Map(v)\n  ),\n\n  simpleTransformation<number, 'NaN' | 'Infinity' | '-Infinity', 'number'>(\n    (v): v is number => isNaNValue(v) || isInfinite(v),\n    'number',\n    v => {\n      if (isNaNValue(v)) {\n        return 'NaN';\n      }\n\n      if (v > 0) {\n        return 'Infinity';\n      } else {\n        return '-Infinity';\n      }\n    },\n    Number\n  ),\n\n  simpleTransformation<number, '-0', 'number'>(\n    (v): v is number => v === 0 && 1 / v === -Infinity,\n    'number',\n    () => {\n      return '-0';\n    },\n    Number\n  ),\n\n  simpleTransformation(\n    isURL,\n    'URL',\n    v => v.toString(),\n    v => new URL(v)\n  ),\n];\n\nfunction compositeTransformation<I, O, A extends CompositeTypeAnnotation>(\n  isApplicable: (v: any, superJson: SuperJSON) => v is I,\n  annotation: (v: I, superJson: SuperJSON) => A,\n  transform: (v: I, superJson: SuperJSON) => O,\n  untransform: (v: O, a: A, superJson: SuperJSON) => I\n) {\n  return {\n    isApplicable,\n    annotation,\n    transform,\n    untransform,\n  };\n}\n\nconst symbolRule = compositeTransformation(\n  (s, superJson): s is Symbol => {\n    if (isSymbol(s)) {\n      const isRegistered = !!superJson.symbolRegistry.getIdentifier(s);\n      return isRegistered;\n    }\n    return false;\n  },\n  (s, superJson) => {\n    const identifier = superJson.symbolRegistry.getIdentifier(s);\n    return ['symbol', identifier!];\n  },\n  v => v.description,\n  (_, a, superJson) => {\n    const value = superJson.symbolRegistry.getValue(a[1]);\n    if (!value) {\n      throw new Error('Trying to deserialize unknown symbol');\n    }\n    return value;\n  }\n);\n\nconst constructorToName = [\n  Int8Array,\n  Uint8Array,\n  Int16Array,\n  Uint16Array,\n  Int32Array,\n  Uint32Array,\n  Float32Array,\n  Float64Array,\n  Uint8ClampedArray,\n].reduce<Record<string, TypedArrayConstructor>>((obj, ctor) => {\n  obj[ctor.name] = ctor;\n  return obj;\n}, {});\n\nconst typedArrayRule = compositeTransformation(\n  isTypedArray,\n  v => ['typed-array', v.constructor.name],\n  v => [...v],\n  (v, a) => {\n    const ctor = constructorToName[a[1]];\n\n    if (!ctor) {\n      throw new Error('Trying to deserialize unknown typed array');\n    }\n\n    return new ctor(v);\n  }\n);\n\nexport function isInstanceOfRegisteredClass(\n  potentialClass: any,\n  superJson: SuperJSON\n): potentialClass is any {\n  if (potentialClass?.constructor) {\n    const isRegistered = !!superJson.classRegistry.getIdentifier(\n      potentialClass.constructor\n    );\n    return isRegistered;\n  }\n  return false;\n}\n\nconst classRule = compositeTransformation(\n  isInstanceOfRegisteredClass,\n  (clazz, superJson) => {\n    const identifier = superJson.classRegistry.getIdentifier(clazz.constructor);\n    return ['class', identifier!];\n  },\n  (clazz, superJson) => {\n    const allowedProps = superJson.classRegistry.getAllowedProps(\n      clazz.constructor\n    );\n    if (!allowedProps) {\n      return { ...clazz };\n    }\n\n    const result: any = {};\n    allowedProps.forEach(prop => {\n      result[prop] = clazz[prop];\n    });\n    return result;\n  },\n  (v, a, superJson) => {\n    const clazz = superJson.classRegistry.getValue(a[1]);\n\n    if (!clazz) {\n      throw new Error(\n        'Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564'\n      );\n    }\n\n    return Object.assign(Object.create(clazz.prototype), v);\n  }\n);\n\nconst customRule = compositeTransformation(\n  (value, superJson): value is any => {\n    return !!superJson.customTransformerRegistry.findApplicable(value);\n  },\n  (value, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findApplicable(\n      value\n    )!;\n    return ['custom', transformer.name];\n  },\n  (value, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findApplicable(\n      value\n    )!;\n    return transformer.serialize(value);\n  },\n  (v, a, superJson) => {\n    const transformer = superJson.customTransformerRegistry.findByName(a[1]);\n    if (!transformer) {\n      throw new Error('Trying to deserialize unknown custom value');\n    }\n    return transformer.deserialize(v);\n  }\n);\n\nconst compositeRules = [classRule, symbolRule, customRule, typedArrayRule];\n\nexport const transformValue = (\n  value: any,\n  superJson: SuperJSON\n): { value: any; type: TypeAnnotation } | undefined => {\n  const applicableCompositeRule = findArr(compositeRules, rule =>\n    rule.isApplicable(value, superJson)\n  );\n  if (applicableCompositeRule) {\n    return {\n      value: applicableCompositeRule.transform(value as never, superJson),\n      type: applicableCompositeRule.annotation(value, superJson),\n    };\n  }\n\n  const applicableSimpleRule = findArr(simpleRules, rule =>\n    rule.isApplicable(value, superJson)\n  );\n\n  if (applicableSimpleRule) {\n    return {\n      value: applicableSimpleRule.transform(value as never, superJson),\n      type: applicableSimpleRule.annotation,\n    };\n  }\n\n  return undefined;\n};\n\nconst simpleRulesByAnnotation: Record<string, typeof simpleRules[0]> = {};\nsimpleRules.forEach(rule => {\n  simpleRulesByAnnotation[rule.annotation] = rule;\n});\n\nexport const untransformValue = (\n  json: any,\n  type: TypeAnnotation,\n  superJson: SuperJSON\n) => {\n  if (isArray(type)) {\n    switch (type[0]) {\n      case 'symbol':\n        return symbolRule.untransform(json, type, superJson);\n      case 'class':\n        return classRule.untransform(json, type, superJson);\n      case 'custom':\n        return customRule.untransform(json, type, superJson);\n      case 'typed-array':\n        return typedArrayRule.untransform(json, type, superJson);\n      default:\n        throw new Error('Unknown transformation: ' + type);\n    }\n  } else {\n    const transformation = simpleRulesByAnnotation[type];\n    if (!transformation) {\n      throw new Error('Unknown transformation: ' + type);\n    }\n\n    return transformation.untransform(json as never, superJson);\n  }\n};\n","import { isMap, isArray, isPlainObject, isSet } from './is';\nimport { includes } from './util';\n\nconst getNthKey = (value: Map<any, any> | Set<any>, n: number): any => {\n  const keys = value.keys();\n  while (n > 0) {\n    keys.next();\n    n--;\n  }\n\n  return keys.next().value;\n};\n\nfunction validatePath(path: (string | number)[]) {\n  if (includes(path, '__proto__')) {\n    throw new Error('__proto__ is not allowed as a property');\n  }\n  if (includes(path, 'prototype')) {\n    throw new Error('prototype is not allowed as a property');\n  }\n  if (includes(path, 'constructor')) {\n    throw new Error('constructor is not allowed as a property');\n  }\n}\n\nexport const getDeep = (object: object, path: (string | number)[]): object => {\n  validatePath(path);\n\n  for (let i = 0; i < path.length; i++) {\n    const key = path[i];\n    if (isSet(object)) {\n      object = getNthKey(object, +key);\n    } else if (isMap(object)) {\n      const row = +key;\n      const type = +path[++i] === 0 ? 'key' : 'value';\n\n      const keyOfRow = getNthKey(object, row);\n      switch (type) {\n        case 'key':\n          object = keyOfRow;\n          break;\n        case 'value':\n          object = object.get(keyOfRow);\n          break;\n      }\n    } else {\n      object = (object as any)[key];\n    }\n  }\n\n  return object;\n};\n\nexport const setDeep = (\n  object: any,\n  path: (string | number)[],\n  mapper: (v: any) => any\n): any => {\n  validatePath(path);\n\n  if (path.length === 0) {\n    return mapper(object);\n  }\n\n  let parent = object;\n\n  for (let i = 0; i < path.length - 1; i++) {\n    const key = path[i];\n\n    if (isArray(parent)) {\n      const index = +key;\n      parent = parent[index];\n    } else if (isPlainObject(parent)) {\n      parent = parent[key];\n    } else if (isSet(parent)) {\n      const row = +key;\n      parent = getNthKey(parent, row);\n    } else if (isMap(parent)) {\n      const isEnd = i === path.length - 2;\n      if (isEnd) {\n        break;\n      }\n\n      const row = +key;\n      const type = +path[++i] === 0 ? 'key' : 'value';\n\n      const keyOfRow = getNthKey(parent, row);\n      switch (type) {\n        case 'key':\n          parent = keyOfRow;\n          break;\n        case 'value':\n          parent = parent.get(keyOfRow);\n          break;\n      }\n    }\n  }\n\n  const lastKey = path[path.length - 1];\n\n  if (isArray(parent)) {\n    parent[+lastKey] = mapper(parent[+lastKey]);\n  } else if (isPlainObject(parent)) {\n    parent[lastKey] = mapper(parent[lastKey]);\n  }\n\n  if (isSet(parent)) {\n    const oldValue = getNthKey(parent, +lastKey);\n    const newValue = mapper(oldValue);\n    if (oldValue !== newValue) {\n      parent.delete(oldValue);\n      parent.add(newValue);\n    }\n  }\n\n  if (isMap(parent)) {\n    const row = +path[path.length - 2];\n    const keyToRow = getNthKey(parent, row);\n\n    const type = +lastKey === 0 ? 'key' : 'value';\n    switch (type) {\n      case 'key': {\n        const newKey = mapper(keyToRow);\n        parent.set(newKey, parent.get(keyToRow));\n\n        if (newKey !== keyToRow) {\n          parent.delete(keyToRow);\n        }\n        break;\n      }\n\n      case 'value': {\n        parent.set(keyToRow, mapper(parent.get(keyToRow)));\n        break;\n      }\n    }\n  }\n\n  return object;\n};\n","import {\n  isArray,\n  isEmptyObject,\n  isMap,\n  isPlainObject,\n  isPrimitive,\n  isSet,\n} from './is';\nimport { escapeKey, stringifyPath } from './pathstringifier';\nimport {\n  isInstanceOfRegisteredClass,\n  transformValue,\n  TypeAnnotation,\n  untransformValue,\n} from './transformer';\nimport { includes, forEach } from './util';\nimport { parsePath } from './pathstringifier';\nimport { getDeep, setDeep } from './accessDeep';\nimport SuperJSON from '.';\n\ntype Tree<T> = InnerNode<T> | Leaf<T>;\ntype Leaf<T> = [T];\ntype InnerNode<T> = [T, Record<string, Tree<T>>];\n\nexport type MinimisedTree<T> = Tree<T> | Record<string, Tree<T>> | undefined;\n\nfunction traverse<T>(\n  tree: MinimisedTree<T>,\n  walker: (v: T, path: string[]) => void,\n  origin: string[] = []\n): void {\n  if (!tree) {\n    return;\n  }\n\n  if (!isArray(tree)) {\n    forEach(tree, (subtree, key) =>\n      traverse(subtree, walker, [...origin, ...parsePath(key)])\n    );\n    return;\n  }\n\n  const [nodeValue, children] = tree;\n  if (children) {\n    forEach(children, (child, key) => {\n      traverse(child, walker, [...origin, ...parsePath(key)]);\n    });\n  }\n\n  walker(nodeValue, origin);\n}\n\nexport function applyValueAnnotations(\n  plain: any,\n  annotations: MinimisedTree<TypeAnnotation>,\n  superJson: SuperJSON\n) {\n  traverse(annotations, (type, path) => {\n    plain = setDeep(plain, path, v => untransformValue(v, type, superJson));\n  });\n\n  return plain;\n}\n\nexport function applyReferentialEqualityAnnotations(\n  plain: any,\n  annotations: ReferentialEqualityAnnotations\n) {\n  function apply(identicalPaths: string[], path: string) {\n    const object = getDeep(plain, parsePath(path));\n\n    identicalPaths.map(parsePath).forEach(identicalObjectPath => {\n      plain = setDeep(plain, identicalObjectPath, () => object);\n    });\n  }\n\n  if (isArray(annotations)) {\n    const [root, other] = annotations;\n    root.forEach(identicalPath => {\n      plain = setDeep(plain, parsePath(identicalPath), () => plain);\n    });\n\n    if (other) {\n      forEach(other, apply);\n    }\n  } else {\n    forEach(annotations, apply);\n  }\n\n  return plain;\n}\n\nconst isDeep = (object: any, superJson: SuperJSON): boolean =>\n  isPlainObject(object) ||\n  isArray(object) ||\n  isMap(object) ||\n  isSet(object) ||\n  isInstanceOfRegisteredClass(object, superJson);\n\nfunction addIdentity(object: any, path: any[], identities: Map<any, any[][]>) {\n  const existingSet = identities.get(object);\n\n  if (existingSet) {\n    existingSet.push(path);\n  } else {\n    identities.set(object, [path]);\n  }\n}\n\ninterface Result {\n  transformedValue: any;\n  annotations?: MinimisedTree<TypeAnnotation>;\n}\n\nexport type ReferentialEqualityAnnotations =\n  | Record<string, string[]>\n  | [string[]]\n  | [string[], Record<string, string[]>];\n\nexport function generateReferentialEqualityAnnotations(\n  identitites: Map<any, any[][]>\n): ReferentialEqualityAnnotations | undefined {\n  const result: Record<string, string[]> = {};\n  let rootEqualityPaths: string[] | undefined = undefined;\n\n  identitites.forEach(paths => {\n    if (paths.length <= 1) {\n      return;\n    }\n\n    const [shortestPath, ...identicalPaths] = paths\n      .map(path => path.map(String))\n      .sort((a, b) => a.length - b.length);\n\n    if (shortestPath.length === 0) {\n      rootEqualityPaths = identicalPaths.map(stringifyPath);\n    } else {\n      result[stringifyPath(shortestPath)] = identicalPaths.map(stringifyPath);\n    }\n  });\n\n  if (rootEqualityPaths) {\n    if (isEmptyObject(result)) {\n      return [rootEqualityPaths];\n    } else {\n      return [rootEqualityPaths, result];\n    }\n  } else {\n    return isEmptyObject(result) ? undefined : result;\n  }\n}\n\nexport const walker = (\n  object: any,\n  identities: Map<any, any[][]>,\n  superJson: SuperJSON,\n  dedupe: boolean,\n  path: any[] = [],\n  objectsInThisPath: any[] = [],\n  seenObjects = new Map<unknown, Result>()\n): Result => {\n  const primitive = isPrimitive(object);\n\n  if (!primitive) {\n    addIdentity(object, path, identities);\n\n    const seen = seenObjects.get(object);\n    if (seen) {\n      // short-circuit result if we've seen this object before\n      return dedupe\n        ? {\n            transformedValue: null,\n          }\n        : seen;\n    }\n  }\n\n  if (!isDeep(object, superJson)) {\n    const transformed = transformValue(object, superJson);\n\n    const result: Result = transformed\n      ? {\n          transformedValue: transformed.value,\n          annotations: [transformed.type],\n        }\n      : {\n          transformedValue: object,\n        };\n    if (!primitive) {\n      seenObjects.set(object, result);\n    }\n    return result;\n  }\n\n  if (includes(objectsInThisPath, object)) {\n    // prevent circular references\n    return {\n      transformedValue: null,\n    };\n  }\n\n  const transformationResult = transformValue(object, superJson);\n  const transformed = transformationResult?.value ?? object;\n\n  const transformedValue: any = isArray(transformed) ? [] : {};\n  const innerAnnotations: Record<string, Tree<TypeAnnotation>> = {};\n\n  forEach(transformed, (value, index) => {\n    const recursiveResult = walker(\n      value,\n      identities,\n      superJson,\n      dedupe,\n      [...path, index],\n      [...objectsInThisPath, object],\n      seenObjects\n    );\n\n    transformedValue[index] = recursiveResult.transformedValue;\n\n    if (isArray(recursiveResult.annotations)) {\n      innerAnnotations[index] = recursiveResult.annotations;\n    } else if (isPlainObject(recursiveResult.annotations)) {\n      forEach(recursiveResult.annotations, (tree, key) => {\n        innerAnnotations[escapeKey(index) + '.' + key] = tree;\n      });\n    }\n  });\n\n  const result: Result = isEmptyObject(innerAnnotations)\n    ? {\n        transformedValue,\n        annotations: !!transformationResult\n          ? [transformationResult.type]\n          : undefined,\n      }\n    : {\n        transformedValue,\n        annotations: !!transformationResult\n          ? [transformationResult.type, innerAnnotations]\n          : innerAnnotations,\n      };\n  if (!primitive) {\n    seenObjects.set(object, result);\n  }\n\n  return result;\n};\n","function getType(payload) {\n  return Object.prototype.toString.call(payload).slice(8, -1);\n}\nfunction isUndefined(payload) {\n  return getType(payload) === \"Undefined\";\n}\nfunction isNull(payload) {\n  return getType(payload) === \"Null\";\n}\nfunction isPlainObject(payload) {\n  if (getType(payload) !== \"Object\")\n    return false;\n  const prototype = Object.getPrototypeOf(payload);\n  return !!prototype && prototype.constructor === Object && prototype === Object.prototype;\n}\nfunction isObject(payload) {\n  return isPlainObject(payload);\n}\nfunction isEmptyObject(payload) {\n  return isPlainObject(payload) && Object.keys(payload).length === 0;\n}\nfunction isFullObject(payload) {\n  return isPlainObject(payload) && Object.keys(payload).length > 0;\n}\nfunction isAnyObject(payload) {\n  return getType(payload) === \"Object\";\n}\nfunction isObjectLike(payload) {\n  return isAnyObject(payload);\n}\nfunction isFunction(payload) {\n  return typeof payload === \"function\";\n}\nfunction isArray(payload) {\n  return getType(payload) === \"Array\";\n}\nfunction isFullArray(payload) {\n  return isArray(payload) && payload.length > 0;\n}\nfunction isEmptyArray(payload) {\n  return isArray(payload) && payload.length === 0;\n}\nfunction isString(payload) {\n  return getType(payload) === \"String\";\n}\nfunction isFullString(payload) {\n  return isString(payload) && payload !== \"\";\n}\nfunction isEmptyString(payload) {\n  return payload === \"\";\n}\nfunction isNumber(payload) {\n  return getType(payload) === \"Number\" && !isNaN(payload);\n}\nfunction isPositiveNumber(payload) {\n  return isNumber(payload) && payload > 0;\n}\nfunction isNegativeNumber(payload) {\n  return isNumber(payload) && payload < 0;\n}\nfunction isBoolean(payload) {\n  return getType(payload) === \"Boolean\";\n}\nfunction isRegExp(payload) {\n  return getType(payload) === \"RegExp\";\n}\nfunction isMap(payload) {\n  return getType(payload) === \"Map\";\n}\nfunction isWeakMap(payload) {\n  return getType(payload) === \"WeakMap\";\n}\nfunction isSet(payload) {\n  return getType(payload) === \"Set\";\n}\nfunction isWeakSet(payload) {\n  return getType(payload) === \"WeakSet\";\n}\nfunction isSymbol(payload) {\n  return getType(payload) === \"Symbol\";\n}\nfunction isDate(payload) {\n  return getType(payload) === \"Date\" && !isNaN(payload);\n}\nfunction isBlob(payload) {\n  return getType(payload) === \"Blob\";\n}\nfunction isFile(payload) {\n  return getType(payload) === \"File\";\n}\nfunction isPromise(payload) {\n  return getType(payload) === \"Promise\";\n}\nfunction isError(payload) {\n  return getType(payload) === \"Error\";\n}\nfunction isNaNValue(payload) {\n  return getType(payload) === \"Number\" && isNaN(payload);\n}\nfunction isPrimitive(payload) {\n  return isBoolean(payload) || isNull(payload) || isUndefined(payload) || isNumber(payload) || isString(payload) || isSymbol(payload);\n}\nconst isNullOrUndefined = isOneOf(isNull, isUndefined);\nfunction isOneOf(a, b, c, d, e) {\n  return (value) => a(value) || b(value) || !!c && c(value) || !!d && d(value) || !!e && e(value);\n}\nfunction isType(payload, type) {\n  if (!(type instanceof Function)) {\n    throw new TypeError(\"Type must be a function\");\n  }\n  if (!Object.prototype.hasOwnProperty.call(type, \"prototype\")) {\n    throw new TypeError(\"Type is not a class\");\n  }\n  const name = type.name;\n  return getType(payload) === name || Boolean(payload && payload.constructor === type);\n}\nfunction isInstanceOf(value, classOrClassName) {\n  if (typeof classOrClassName === \"function\") {\n    for (let p = value; p; p = Object.getPrototypeOf(p)) {\n      if (isType(p, classOrClassName)) {\n        return true;\n      }\n    }\n    return false;\n  } else {\n    for (let p = value; p; p = Object.getPrototypeOf(p)) {\n      if (getType(p) === classOrClassName) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nexport { getType, isAnyObject, isArray, isBlob, isBoolean, isDate, isEmptyArray, isEmptyObject, isEmptyString, isError, isFile, isFullArray, isFullObject, isFullString, isFunction, isInstanceOf, isMap, isNaNValue, isNegativeNumber, isNull, isNullOrUndefined, isNumber, isObject, isObjectLike, isOneOf, isPlainObject, isPositiveNumber, isPrimitive, isPromise, isRegExp, isSet, isString, isSymbol, isType, isUndefined, isWeakMap, isWeakSet };\n","import { isArray, isPlainObject } from 'is-what';\n\nfunction assignProp(carry, key, newVal, originalObject, includeNonenumerable) {\n  const propType = {}.propertyIsEnumerable.call(originalObject, key) ? \"enumerable\" : \"nonenumerable\";\n  if (propType === \"enumerable\")\n    carry[key] = newVal;\n  if (includeNonenumerable && propType === \"nonenumerable\") {\n    Object.defineProperty(carry, key, {\n      value: newVal,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    });\n  }\n}\nfunction copy(target, options = {}) {\n  if (isArray(target)) {\n    return target.map((item) => copy(item, options));\n  }\n  if (!isPlainObject(target)) {\n    return target;\n  }\n  const props = Object.getOwnPropertyNames(target);\n  const symbols = Object.getOwnPropertySymbols(target);\n  return [...props, ...symbols].reduce((carry, key) => {\n    if (isArray(options.props) && !options.props.includes(key)) {\n      return carry;\n    }\n    const val = target[key];\n    const newVal = copy(val, options);\n    assignProp(carry, key, newVal, target, options.nonenumerable);\n    return carry;\n  }, {});\n}\n\nexport { copy };\n","import { Class, JSONValue, SuperJSONResult, SuperJSONValue } from './types';\nimport { ClassRegistry, RegisterOptions } from './class-registry';\nimport { Registry } from './registry';\nimport {\n  CustomTransfomer,\n  CustomTransformerRegistry,\n} from './custom-transformer-registry';\nimport {\n  applyReferentialEqualityAnnotations,\n  applyValueAnnotations,\n  generateReferentialEqualityAnnotations,\n  walker,\n} from './plainer';\nimport { copy } from 'copy-anything';\n\nexport default class SuperJSON {\n  /**\n   * If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.\n   */\n  private readonly dedupe: boolean;\n\n  /**\n   * @param dedupeReferentialEqualities  If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.\n   */\n  constructor({\n    dedupe = false,\n  }: {\n    dedupe?: boolean;\n  } = {}) {\n    this.dedupe = dedupe;\n  }\n\n  serialize(object: SuperJSONValue): SuperJSONResult {\n    const identities = new Map<any, any[][]>();\n    const output = walker(object, identities, this, this.dedupe);\n    const res: SuperJSONResult = {\n      json: output.transformedValue,\n    };\n\n    if (output.annotations) {\n      res.meta = {\n        ...res.meta,\n        values: output.annotations,\n      };\n    }\n\n    const equalityAnnotations = generateReferentialEqualityAnnotations(\n      identities\n    );\n    if (equalityAnnotations) {\n      res.meta = {\n        ...res.meta,\n        referentialEqualities: equalityAnnotations,\n      };\n    }\n\n    return res;\n  }\n\n  deserialize<T = unknown>(payload: SuperJSONResult): T {\n    const { json, meta } = payload;\n\n    let result: T = copy(json) as any;\n\n    if (meta?.values) {\n      result = applyValueAnnotations(result, meta.values, this);\n    }\n\n    if (meta?.referentialEqualities) {\n      result = applyReferentialEqualityAnnotations(\n        result,\n        meta.referentialEqualities\n      );\n    }\n\n    return result;\n  }\n\n  stringify(object: SuperJSONValue): string {\n    return JSON.stringify(this.serialize(object));\n  }\n\n  parse<T = unknown>(string: string): T {\n    return this.deserialize(JSON.parse(string));\n  }\n\n  readonly classRegistry = new ClassRegistry();\n  registerClass(v: Class, options?: RegisterOptions | string) {\n    this.classRegistry.register(v, options);\n  }\n\n  readonly symbolRegistry = new Registry<Symbol>(s => s.description ?? '');\n  registerSymbol(v: Symbol, identifier?: string) {\n    this.symbolRegistry.register(v, identifier);\n  }\n\n  readonly customTransformerRegistry = new CustomTransformerRegistry();\n  registerCustom<I, O extends JSONValue>(\n    transformer: Omit<CustomTransfomer<I, O>, 'name'>,\n    name: string\n  ) {\n    this.customTransformerRegistry.register({\n      name,\n      ...transformer,\n    });\n  }\n\n  readonly allowedErrorProps: string[] = [];\n  allowErrorProps(...props: string[]) {\n    this.allowedErrorProps.push(...props);\n  }\n\n  private static defaultInstance = new SuperJSON();\n  static serialize = SuperJSON.defaultInstance.serialize.bind(\n    SuperJSON.defaultInstance\n  );\n  static deserialize = SuperJSON.defaultInstance.deserialize.bind(\n    SuperJSON.defaultInstance\n  );\n  static stringify = SuperJSON.defaultInstance.stringify.bind(\n    SuperJSON.defaultInstance\n  );\n  static parse = SuperJSON.defaultInstance.parse.bind(\n    SuperJSON.defaultInstance\n  );\n  static registerClass = SuperJSON.defaultInstance.registerClass.bind(\n    SuperJSON.defaultInstance\n  );\n  static registerSymbol = SuperJSON.defaultInstance.registerSymbol.bind(\n    SuperJSON.defaultInstance\n  );\n  static registerCustom = SuperJSON.defaultInstance.registerCustom.bind(\n    SuperJSON.defaultInstance\n  );\n  static allowErrorProps = SuperJSON.defaultInstance.allowErrorProps.bind(\n    SuperJSON.defaultInstance\n  );\n}\n\nexport { SuperJSON };\n\nexport const serialize = SuperJSON.serialize;\nexport const deserialize = SuperJSON.deserialize;\n\nexport const stringify = SuperJSON.stringify;\nexport const parse = SuperJSON.parse;\n\nexport const registerClass = SuperJSON.registerClass;\nexport const registerCustom = SuperJSON.registerCustom;\nexport const registerSymbol = SuperJSON.registerSymbol;\nexport const allowErrorProps = SuperJSON.allowErrorProps;\n","import { createTRPCProxyClient, httpBatchLink } from \"@trpc/client\";\nimport { type inferRouterInputs, type inferRouterOutputs } from \"@trpc/server\";\nimport superjson from \"superjson\";\nimport { type API } from \"types/api\";\n\nexport type AlgoraInput = inferRouterInputs<API>;\nexport type AlgoraOutput = inferRouterOutputs<API>;\n\nexport const algora = createTRPCProxyClient<API>({\n  transformer: superjson,\n  links: [\n    httpBatchLink({\n      url: \"https://console.algora.io/api/trpc\",\n    }),\n  ],\n});\n\nconst parseStatus = (\n  status: string | null,\n): \"active\" | \"inactive\" | undefined => {\n  switch (status) {\n    case \"active\":\n      return \"active\";\n    case \"inactive\":\n      return \"inactive\";\n    default:\n      return undefined;\n  }\n};\n\nconst parseParams = (el: Element) => {\n  const org = el.getAttribute(\"data-bounty-org\");\n  const limit = parseInt(el.getAttribute(\"data-bounty-limit\") || \"100\", 10);\n  const status = parseStatus(el.getAttribute(\"data-bounty-status\"));\n\n  if (!org) {\n    return;\n  }\n\n  return { org, limit, status };\n};\n\nasync function init(selector = \"[data-bounty-org]\") {\n  try {\n    const container = document.querySelector(selector);\n    if (!container) {\n      return;\n    }\n\n    const params = parseParams(container);\n    if (!params) {\n      console.error(\"Algora SDK: Invalid configuration\");\n      return;\n    }\n\n    container.innerHTML = \"\";\n\n    for (let i = 0; i < params.limit; i++) {\n      container.innerHTML += `\n      <div class=\"bounty-skeleton\">\n        <div class=\"bounty-content\">\n          <div class=\"bounty-reward\"></div>\n          <div class=\"bounty-issue\"></div>\n          <div class=\"bounty-title\"></div>\n        </div>\n      </div>\n    `;\n    }\n\n    const { items: bounties } = await algora.bounty.list.query(params);\n\n    container.innerHTML = \"\";\n\n    bounties.forEach((bounty) => {\n      container.innerHTML += `\n        <a\n          href=\"${bounty.task.url}\"\n          target=\"_blank\"\n          rel=\"noopener\"\n          class=\"bounty-card\"\n        >\n          <div class=\"bounty-content\">\n            <div class=\"bounty-reward\">${bounty.reward_formatted}</div>\n            <div class=\"bounty-issue\">${bounty.task.repo_name}#${bounty.task.number}</div>\n            <div class=\"bounty-title\">${bounty.task.title}</div>\n          </div>\n        </a>\n      `;\n    });\n  } catch (error) {\n    console.error(\"Algora SDK: Failed to fetch bounties\", error);\n  }\n}\n\n// Export for IIFE bundle\nif (typeof window !== \"undefined\") {\n  (window as any).Algora = { algora, init };\n\n  // Auto-initialize when script loads\n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", () => init());\n  } else {\n    init();\n  }\n}\n"],"mappings":"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","names":["identity","x","pipeFromArray","fns","input","prev","fn","observable","subscribe","self","observer","teardownRef","isDone","unsubscribed","teardownImmediately","unsubscribe","value","err","operations","pipeFromArray","share","_opts","originalObserver","refCount","subscription","observers","startIfNeeded","value","observer","error","resetIfNeeded","_sub","index","v","ObservableAbortError","message","observableToPromise","observable","abort","resolve","reject","isDone","onDone","obs$","data","createChain","opts","observable","observer","execute","index","op","next","nextOp","isTRPCClientError","cause","TRPCClientError","opts","message","invert","obj","newObj","key","v","TRPC_ERROR_CODES_BY_KEY","TRPC_ERROR_CODES_BY_NUMBER","TRPC_ERROR_CODES_BY_NUMBER","invert","TRPC_ERROR_CODES_BY_KEY","noop","createInnerProxy","callback","path","_obj","key","_1","_2","args","isApply","createRecursiveProxy","createFlatProxy","name","isFunction","fn","getFetch","customFetchImpl","getAbortController","customAbortControllerImpl","resolveHTTPLinkOptions","opts","arrayToDict","array","dict","index","element","METHOD","getInput","_input","getUrl","url","queryParts","input","getBody","jsonHttpRequester","httpRequest","fetchHTTPResponse","ac","body","type","resolvedHeaders","headers","meta","resolve","reject","_res","json","err","TRPCClientError","isObject","value","transformResultInner","response","runtime","error","TransformResultError","transformResult","result","throwFatalError","dataLoader","batchLoader","pendingItems","dispatchTimer","destroyTimerAndPendingItems","groupItems","items","groupedItems","index","item","lastGroup","it","dispatch","batch","unitResolver","value","promise","cancel","_item","result","i","cause","load","key","resolve","reject","createHTTPBatchLink","requester","opts","resolvedOpts","resolveHTTPLinkOptions","maxURLLength","runtime","type","validate","batchOps","path","op","inputs","getUrl","fetch","query","mutation","subscription","loaders","observable","observer","loader","_res","res","transformed","transformResult","TRPCClientError","err","batchRequester","requesterOpts","jsonHttpRequester","httpBatchLink","httpLinkFactory","factoryOpts","opts","resolvedOpts","resolveHTTPLinkOptions","runtime","op","observable","observer","path","input","type","promise","cancel","meta","res","transformed","transformResult","TRPCClientError","cause","httpLink","jsonHttpRequester","TRPCUntypedClient","type","input","path","context","createChain","share","opts","req$","promise","abort","observableToPromise","resolve","reject","envelope","err","TRPCClientError","combinedTransformer","transformer","data","link","clientCallTypeMap","clientCallTypeToProcedureType","clientCallType","createTRPCClientProxy","client","createFlatProxy","key","createRecursiveProxy","path","args","pathCopy","procedureType","fullPath","createTRPCProxyClient","opts","TRPCUntypedClient","getTextDecoder","customTextDecoder","parseJSONStream","opts","parse","onLine","line","indexOfColon","indexAsStr","text","readLines","readableStream","textDecoder","partOfLine","onChunk","chunk","chunkLines","i","readStandardChunks","readNodeChunks","stream","resolve","reader","readResult","streamingJsonHttpRequester","onSingle","ac","responsePromise","fetchHTTPResponse","getUrl","getBody","cancel","promise","res","meta","string","streamRequester","requesterOpts","batchOps","unitResolver","path","op","inputs","index","unstable_httpBatchStreamLink","createHTTPBatchLink","formDataRequester","httpRequest","experimental_formDataLink","httpLinkFactory","DoubleIndexedKV","key","value","Registry","generateIdentifier","DoubleIndexedKV","value","identifier","ClassRegistry","_super","__extends","_this","c","value","options","Registry","valuesOfObj","record","values","key","find","predicate","valuesNotNever","i","value","forEach","run","_a","_b","__read","includes","arr","findArr","CustomTransformerRegistry","transformer","v","find","name","getType","payload","isUndefined","isNull","isPlainObject","isEmptyObject","isArray","isString","isNumber","isBoolean","isRegExp","isMap","isSet","isSymbol","isDate","isError","isNaNValue","isPrimitive","isBigint","isInfinite","isTypedArray","isURL","escapeKey","key","stringifyPath","path","parsePath","string","result","segment","i","char","isEscapedDot","isEndOfSegment","lastSegment","simpleTransformation","isApplicable","annotation","transform","untransform","simpleRules","isUndefined","isBigint","v","isDate","isError","superJson","baseError","prop","isRegExp","regex","body","flags","isSet","__spreadArray","__read","isMap","isNaNValue","isInfinite","isURL","compositeTransformation","symbolRule","s","isSymbol","isRegistered","identifier","_","a","value","constructorToName","obj","ctor","typedArrayRule","isTypedArray","isInstanceOfRegisteredClass","potentialClass","classRule","clazz","allowedProps","__assign","result","customRule","transformer","compositeRules","transformValue","applicableCompositeRule","findArr","rule","applicableSimpleRule","simpleRulesByAnnotation","untransformValue","json","type","isArray","transformation","getNthKey","value","n","keys","validatePath","path","includes","getDeep","object","i","key","isSet","isMap","row","type","keyOfRow","setDeep","mapper","parent","isArray","index","isPlainObject","isEnd","lastKey","oldValue","newValue","keyToRow","newKey","traverse","tree","walker","origin","isArray","forEach","subtree","key","__spreadArray","__read","parsePath","_a","nodeValue","children","child","applyValueAnnotations","plain","annotations","superJson","type","path","setDeep","v","untransformValue","applyReferentialEqualityAnnotations","apply","identicalPaths","object","getDeep","identicalObjectPath","root","other","identicalPath","isDeep","isPlainObject","isMap","isSet","isInstanceOfRegisteredClass","addIdentity","identities","existingSet","generateReferentialEqualityAnnotations","identitites","result","rootEqualityPaths","paths","a","b","shortestPath","stringifyPath","isEmptyObject","dedupe","objectsInThisPath","seenObjects","primitive","isPrimitive","seen","transformed_1","transformValue","result_1","includes","transformationResult","transformed","transformedValue","innerAnnotations","value","index","recursiveResult","escapeKey","getType","payload","isUndefined","isNull","isPlainObject","prototype","isArray","payload","getType","isNullOrUndefined","isOneOf","isNull","isUndefined","a","b","c","d","e","value","assignProp","carry","key","newVal","originalObject","includeNonenumerable","propType","copy","target","options","isArray","item","isPlainObject","props","symbols","val","SuperJSON","_a","_b","_c","dedupe","ClassRegistry","Registry","s","CustomTransformerRegistry","object","identities","output","walker","res","__assign","equalityAnnotations","generateReferentialEqualityAnnotations","payload","json","meta","result","copy","applyValueAnnotations","applyReferentialEqualityAnnotations","string","v","options","identifier","transformer","name","props","_i","__spreadArray","__read","serialize","SuperJSON","deserialize","stringify","parse","registerClass","registerCustom","registerSymbol","allowErrorProps","algora","createTRPCProxyClient","esm_default","httpBatchLink","parseStatus","status","parseParams","el","org","limit","init","selector","container","params","i","bounties","bounty","error"]}